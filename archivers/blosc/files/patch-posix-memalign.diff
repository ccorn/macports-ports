--- bench/bench.c.orig	2017-07-19 10:08:12.000000000 +0200
+++ bench/bench.c	2017-10-10 05:58:25.000000000 +0200
@@ -138,6 +138,17 @@ int posix_memalign(void **memptr, size_t
 #define aligned_free(memptr) free(memptr)
 #endif  /* defined(_WIN32) && !defined(__MINGW32__) */
 
+#if !(_POSIX_C_SOURCE >= 200112L || _XOPEN_SOURCE >= 600)
+#include <stdlib.h>
+#include <errno.h>
+int posix_memalign(void **memptr, size_t alignment, size_t size)
+{
+	/* no real alignment done, but that does not matter here */
+	*memptr = malloc(size);
+	return *memptr ? 0 : errno;
+}
+#endif /* !(_POSIX_C_SOURCE >= 200112L || _XOPEN_SOURCE >= 600) */
+
 int get_value(int i, int rshift) {
   int v;
 
