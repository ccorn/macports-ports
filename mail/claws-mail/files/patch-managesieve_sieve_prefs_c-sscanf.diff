--- src/plugins/managesieve/sieve_prefs.c.orig	2018-08-26 13:25:23.000000000 +0200
+++ src/plugins/managesieve/sieve_prefs.c	2018-11-24 14:33:48.000000000 +0100
@@ -477,7 +477,7 @@ struct SieveAccountConfig *sieve_prefs_a
 	guchar tls_type, auth, auth_type;
 	gsize len;
 	gint num;
-#if defined(G_OS_WIN32) || defined(__OpenBSD__) || defined(__FreeBSD__)
+#if defined(G_OS_WIN32) || defined(__OpenBSD__) || defined(__FreeBSD__) || defined(__APPLE__)
 	/* Non-GNU sscanf() does not understand the %ms format, so we
 	 * have to do the allocation of target buffer ourselves before
 	 * calling sscanf(), and copy the host string to config->host.
@@ -503,13 +503,13 @@ struct SieveAccountConfig *sieve_prefs_a
 
 	enc_userid[0] = '\0';
 	enc_passwd[0] = '\0';
-#if defined(G_OS_WIN32) || defined(__OpenBSD__) || defined(__FreeBSD__)
+#if defined(G_OS_WIN32) || defined(__OpenBSD__) || defined(__FreeBSD__) || defined(__APPLE__)
 	if ((num = sscanf(confstr, "%c%c %255s %c%hu %hhu %hhu %hhu %255s %255s",
 #else
 	if ((num = sscanf(confstr, "%c%c %ms %c%hu %hhu %hhu %hhu %255s %255s",
 #endif
 			&enable, &use_host,
-#if defined(G_OS_WIN32) || defined(__OpenBSD__) || defined(__FreeBSD__)
+#if defined(G_OS_WIN32) || defined(__OpenBSD__) || defined(__FreeBSD__) || defined(__APPLE__)
 			tmphost,
 #else
 			&config->host,
@@ -538,7 +538,7 @@ struct SieveAccountConfig *sieve_prefs_a
 	config->auth = auth;
 	config->auth_type = auth_type;
 
-#if defined(G_OS_WIN32) || defined(__OpenBSD__) || defined(__FreeBSD__)
+#if defined(G_OS_WIN32) || defined(__OpenBSD__) || defined(__FreeBSD__) || defined(__APPLE__)
 	config->host = g_strndup(tmphost, 255);
 #endif
 
